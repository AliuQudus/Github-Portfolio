<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHub Portfolio Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
      }
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .markdown-content {
        line-height: 1.6;
      }
      .markdown-content h1 {
        font-size: 2em;
        font-weight: bold;
        margin-top: 0.67em;
        margin-bottom: 0.67em;
      }
      .markdown-content h2 {
        font-size: 1.5em;
        font-weight: bold;
        margin-top: 0.83em;
        margin-bottom: 0.83em;
      }
      .markdown-content h3 {
        font-size: 1.17em;
        font-weight: bold;
        margin-top: 1em;
        margin-bottom: 1em;
      }
      .markdown-content p {
        margin-top: 0;
        margin-bottom: 1em;
      }
      .markdown-content ul,
      .markdown-content ol {
        margin-left: 1.5em;
        margin-bottom: 1em;
      }
      .markdown-content code {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 0.2em 0.4em;
        border-radius: 3px;
        font-family: monospace;
      }
      .markdown-content pre {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 1em;
        border-radius: 6px;
        overflow-x: auto;
        margin-bottom: 1em;
      }
      .markdown-content a {
        color: #a78bfa;
        text-decoration: underline;
      }
      .markdown-content img {
        max-width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>

    <script>
      let state = {
        username: "",
        loading: false,
        error: "",
        userData: null,
        repos: [],
        readme: null,
        showPortfolio: false,
      };

      function setState(newState) {
        state = { ...state, ...newState };
        render();
      }

      async function fetchGitHubData() {
        if (!state.username.trim()) {
          setState({ error: "Please enter a GitHub username" });
          return;
        }

        setState({ loading: true, error: "", showPortfolio: false });

        try {
          // Fetch user data
          const userResponse = await fetch(
            `https://api.github.com/users/${state.username}`
          );
          if (!userResponse.ok) {
            throw new Error("User not found");
          }
          const user = await userResponse.json();

          // Fetch repositories
          const reposResponse = await fetch(
            `https://api.github.com/users/${state.username}/repos?sort=updated&per_page=6`
          );
          const reposData = await reposResponse.json();

          // Try to fetch README from profile repo
          let readme = null;
          try {
            const readmeResponse = await fetch(
              `https://api.github.com/repos/${state.username}/${state.username}/readme`,
              {
                headers: { Accept: "application/vnd.github.v3.raw" },
              }
            );
            if (readmeResponse.ok) {
              const readmeText = await readmeResponse.text();
              readme = marked.parse(readmeText);
            }
          } catch (e) {
            console.log("No profile README found");
          }

          setState({
            userData: user,
            repos: reposData,
            readme: readme,
            showPortfolio: true,
            loading: false,
          });
        } catch (err) {
          setState({
            error: err.message || "Failed to fetch GitHub data",
            loading: false,
          });
        }
      }

      function renderPortfolio() {
        const { userData, repos, readme } = state;

        return `
                <div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 text-gray-900">
                    <!-- Header -->
                    <div class="bg-white shadow-md">
                        <div class="max-w-6xl mx-auto px-6 py-8">
                            <button onclick="setState({ showPortfolio: false, username: '', userData: null, repos: [], readme: null })" 
                                    class="mb-6 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition shadow-sm">
                                ‚Üê Generate New Portfolio
                            </button>
                            
                            <div class="flex flex-col md:flex-row items-center gap-8">
                                <img src="${userData.avatar_url}" alt="${
          userData.name
        }" 
                                     class="w-40 h-40 rounded-full border-4 border-indigo-500 shadow-xl">
                                <div class="text-center md:text-left flex-1">
                                    <h1 class="text-5xl font-bold mb-2 text-gray-900">${
                                      userData.name || userData.login
                                    }</h1>
                                    <p class="text-xl text-indigo-600 mb-4">@${
                                      userData.login
                                    }</p>
                                    ${
                                      userData.bio
                                        ? `<p class="text-lg text-gray-600 mb-4">${userData.bio}</p>`
                                        : ""
                                    }
                                    
                                    <div class="flex flex-wrap gap-4 justify-center md:justify-start text-sm text-gray-600">
                                        ${
                                          userData.location
                                            ? `
                                            <div class="flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                                </svg>
                                                <span>${userData.location}</span>
                                            </div>
                                        `
                                            : ""
                                        }
                                        ${
                                          userData.email
                                            ? `
                                            <div class="flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                                </svg>
                                                <span>${userData.email}</span>
                                            </div>
                                        `
                                            : ""
                                        }
                                        ${
                                          userData.blog
                                            ? `
                                            <a href="${userData.blog}" target="_blank" rel="noopener noreferrer" 
                                               class="flex items-center gap-1 hover:text-indigo-600">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                                                </svg>
                                                <span>Website</span>
                                            </a>
                                        `
                                            : ""
                                        }
                                        ${
                                          userData.company
                                            ? `
                                            <div class="flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                                </svg>
                                                <span>${userData.company}</span>
                                            </div>
                                        `
                                            : ""
                                        }
                                    </div>
                                </div>
                            </div>

                            <!-- Stats -->
                            <div class="grid grid-cols-3 gap-4 mt-8">
                                <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg p-4 text-center text-white shadow-lg">
                                    <div class="text-3xl font-bold">${
                                      userData.public_repos
                                    }</div>
                                    <div class="text-sm opacity-90">Repositories</div>
                                </div>
                                <div class="bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg p-4 text-center text-white shadow-lg">
                                    <div class="text-3xl font-bold">${
                                      userData.followers
                                    }</div>
                                    <div class="text-sm opacity-90">Followers</div>
                                </div>
                                <div class="bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg p-4 text-center text-white shadow-lg">
                                    <div class="text-3xl font-bold">${
                                      userData.following
                                    }</div>
                                    <div class="text-sm opacity-90">Following</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- About Me Section -->
                    ${
                      readme
                        ? `
                        <div class="max-w-6xl mx-auto px-6 py-12">
                            <div class="bg-white rounded-2xl shadow-lg p-8">
                                <h2 class="text-3xl font-bold mb-6 text-gray-900 flex items-center gap-2">
                                    <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                    </svg>
                                    About Me
                                </h2>
                                <div class="markdown-content text-gray-700">
                                    ${readme}
                                </div>
                            </div>
                        </div>
                    `
                        : ""
                    }

                    <!-- Projects -->
                    <div class="max-w-6xl mx-auto px-6 py-12">
                        <h2 class="text-3xl font-bold mb-8 text-gray-900 flex items-center gap-2">
                            <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                            </svg>
                            Recent Projects
                        </h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${repos
                              .map(
                                (repo) => `
                                <a href="${
                                  repo.html_url
                                }" target="_blank" rel="noopener noreferrer" 
                                   class="bg-white rounded-xl p-6 hover:shadow-xl transition border border-gray-200 hover:border-indigo-400 group">
                                    <h3 class="text-xl font-semibold mb-2 text-indigo-600 group-hover:text-indigo-700">${
                                      repo.name
                                    }</h3>
                                    <p class="text-gray-600 text-sm mb-4 line-clamp-2">
                                        ${
                                          repo.description ||
                                          "No description available"
                                        }
                                    </p>
                                    
                                    <div class="flex gap-4 text-sm text-gray-500">
                                        <div class="flex items-center gap-1">
                                            <svg class="w-4 h-4 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <span>${
                                              repo.stargazers_count
                                            }</span>
                                        </div>
                                        <div class="flex items-center gap-1">
                                            <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span>${repo.forks_count}</span>
                                        </div>
                                        ${
                                          repo.language
                                            ? `
                                            <div class="flex items-center gap-1">
                                                <div class="w-3 h-3 rounded-full bg-indigo-500"></div>
                                                <span>${repo.language}</span>
                                            </div>
                                        `
                                            : ""
                                        }
                                    </div>
                                </a>
                            `
                              )
                              .join("")}
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="bg-white shadow-md mt-12">
                        <div class="max-w-6xl mx-auto px-6 py-8 text-center">
                            <a href="${
                              userData.html_url
                            }" target="_blank" rel="noopener noreferrer" 
                               class="inline-flex items-center gap-2 px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-lg transition text-lg font-semibold shadow-lg">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
                                </svg>
                                View GitHub Profile
                            </a>
                        </div>
                    </div>
                </div>
            `;
      }

      function renderInput() {
        return `
                <div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center p-6">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full border border-gray-200">
                        <div class="text-center mb-8">
                            <svg class="w-16 h-16 mx-auto mb-4 text-gray-900" fill="currentColor" viewBox="0 0 24 24">
                                <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
                            </svg>
                            <h1 class="text-4xl font-bold text-gray-900 mb-2">Portfolio Generator</h1>
                            <p class="text-gray-600">Generate a stunning portfolio from your GitHub profile</p>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-semibold mb-2">GitHub Username</label>
                                <input 
                                    type="text" 
                                    id="username-input"
                                    value="${state.username}"
                                    placeholder="octocat"
                                    class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-300 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                    onkeypress="if(event.key === 'Enter') fetchGitHubData()"
                                >
                            </div>

                            ${
                              state.error
                                ? `
                                <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                                    ${state.error}
                                </div>
                            `
                                : ""
                            }

                            <button 
                                onclick="fetchGitHubData()"
                                ${state.loading ? "disabled" : ""}
                                class="w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow-lg">
                                ${
                                  state.loading
                                    ? `
                                    <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
                                    <span>Generating...</span>
                                `
                                    : `
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
                                    </svg>
                                    <span>Generate Portfolio</span>
                                `
                                }
                            </button>
                        </div>

                        <p class="text-center text-gray-500 text-sm mt-6">
                            Enter any GitHub username to create an instant portfolio
                        </p>
                    </div>
                </div>
            `;
      }

      function render() {
        const app = document.getElementById("app");
        app.innerHTML = state.showPortfolio ? renderPortfolio() : renderInput();

        if (!state.showPortfolio) {
          const input = document.getElementById("username-input");
          if (input) {
            input.addEventListener("input", (e) => {
              state.username = e.target.value;
            });
          }
        }
      }

      // Initial render
      render();
    </script>
  </body>
</html>
